@using BookLog.Dtos

@model IEnumerable<BookListDto>

<h1>List of all books</h1>
<div class="mb-3">
    <a class="btn btn-success" asp-action="Create">Create</a>
</div>
@foreach (var book in Model) {
    <div class="border border-1 border-dark p-2 mb-3 d-flex align-items-stretch gap-3">
        @if (!string.IsNullOrWhiteSpace(book.CoverImageUrl)) {
            <div style="width: 120px; flex-shrink: 0;">
                <img src="@book.CoverImageUrl" alt="@book.Title cover" class="img-fluid h-100 rounded"
                     style="object-fit: cover;" />
            </div>
        }
        <div class="flex-grow-1 d-flex flex-column">
            <h5 class="mb-1">
                @book.Title
                @if (!string.IsNullOrWhiteSpace(book.DatabazeKnihUrl)) {
                    <a href="@book.DatabazeKnihUrl" target="_blank" title="DatabazeKnih.cz">🔗</a>
                }
            </h5>
            <div class="text-muted mb-2">
                @string.Join(", ", book.Authors)
            </div>
            <div class="mt-2">
                @foreach (var genre in book.Genres) {
                    <span class="badge bg-light text-dark border me-1">@genre</span>
                }
            </div>
            <div class="mt-auto pt-2">
                <a class="btn btn-primary btn-sm" asp-controller="Books" asp-action="Details"
                   asp-route-id="@book.Id">Reviews</a>
                <a class="btn btn-warning btn-sm" asp-action="Edit" asp-route-id="@book.Id">Edit</a>
                <form method="post" style="display: inline">
                    <button type="submit" class="btn btn-danger btn-sm" asp-action="Delete" asp-route-id="@book.Id">Delete</button>
                </form>
            </div>
        </div>
    </div>
}
